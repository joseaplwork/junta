<div class="p-6">
  <div class="mb-6 flex items-center justify-between">
    <h1 class="text-2xl font-bold">Admin Users</h1>
    <a routerLink="/dashboard/create-admin" mat-raised-button color="primary">
      <mat-icon>add</mat-icon>
      Add New Admin
    </a>
  </div>

  @if (loading()) {
  <div class="flex justify-center p-8">
    <p>Loading admins...</p>
  </div>
  } @if (error()) {
  <div
    class="mb-4 rounded border border-red-400 bg-red-100 px-4 py-3 text-red-700">
    {{ error() }}
  </div>
  } @if (admins().length === 0 && !loading()) {
  <div
    class="rounded border border-yellow-400 bg-yellow-100 px-4 py-3 text-yellow-700">
    No admin users found. Click the "Add New Admin" button to create one.
  </div>
  } @if (admins().length > 0) {
  <div class="mat-elevation-z2">
    <table mat-table [dataSource]="admins()" class="w-full">
      <!-- Name Column -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>Name</th>
        <td mat-cell *matCellDef="let admin">
          {{ admin.user.name }} {{ admin.user.surname }}
        </td>
      </ng-container>

      <!-- Email Column -->
      <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef>Email</th>
        <td mat-cell *matCellDef="let admin">{{ admin.email }}</td>
      </ng-container>

      <!-- Role Column -->
      <ng-container matColumnDef="role">
        <th mat-header-cell *matHeaderCellDef>Role</th>
        <td mat-cell *matCellDef="let admin">
          <div class="flex flex-wrap gap-1">
            @for (role of admin.roles; track role) {
            <span
              class="rounded-full bg-purple-100 px-2 py-1 text-xs text-purple-800">
              {{ role }}
            </span>
            }
          </div>
        </td>
      </ng-container>

      <!-- Phone Column -->
      <ng-container matColumnDef="phone">
        <th mat-header-cell *matHeaderCellDef>Phone</th>
        <td mat-cell *matCellDef="let admin">{{ admin.user.phoneNumber }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>
  }
</div>
